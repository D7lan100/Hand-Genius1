{% extends 'base.html' %}
{% block title %}Calendario - Hand&Genius{% endblock %}

{% block content %}
<div class="container-fluid py-4" style="margin-top: 20px;">
  <div class="calendar-container d-grid gap-4" 
       style="grid-template-columns: 280px 1fr; height: calc(100vh - 100px);">
    
    <!-- Formulario de evento -->
    <div class="form-container p-4 bg-white rounded-4 shadow-sm">
      <h2 class="text-center text-primary mb-3">âž• Nuevo Evento</h2>
      <form method="POST" action="/calendario">
        <input type="text" name="nombre_evento" class="form-control mb-2" placeholder="Ej: ReuniÃ³n" required>
        <textarea name="descripcion" class="form-control mb-2" placeholder="Detalles opcionales..." rows="3"></textarea>
        <input type="date" name="fecha_evento" class="form-control mb-3" required>
        <button type="submit" class="btn btn-primary w-100">Guardar</button>
      </form>
    </div>

    <!-- Calendario -->
    <div id="calendar" class="bg-white rounded-4 shadow-sm p-3 w-100 h-100"></div>
  </div>
</div>

<!-- FullCalendar -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/locales/es.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
  var calendarEl = document.getElementById("calendar");
  var calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: "dayGridMonth",
    locale: "es",
    height: "100%",
    headerToolbar: {
        left: "prev,next today",
        center: "title",
        right: "dayGridMonth,timeGridWeek,timeGridDay"
    },
    events: "/api/eventos",
    eventColor: "#0080FF",
    eventTextColor: "#fff"
  });
  calendar.render();
});
</script>

<style>
  body {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  }
  .fc .fc-toolbar-title { color: #0080FF; font-weight: 600; }
  .fc-button { background: #0080FF; border: none; color: white; border-radius: 8px; }
  .fc-button:hover { background: #3399FF; }
  .fc-daygrid-event { border-radius: 12px; font-size: 13px; padding: 4px; }
  /* ðŸ”§ elimina espacio fantasma */
  main, .container-fluid {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
  .navbar {
    margin-bottom: 0 !important;
  }
</style>
{% endblock %}
